"use strict";var x=Object.create;var l=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var j=(t,o,s,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of b(o))!S.call(t,i)&&i!==s&&l(t,i,{get:()=>o[i],enumerable:!(n=T(o,i))||n.enumerable});return t};var c=(t,o,s)=>(s=t!=null?x(w(t)):{},j(o||!t||!t.__esModule?l(s,"default",{value:t,enumerable:!0}):s,t));var O=require("node:fs"),_=require("node:child_process"),g=c(require("node:path"));var e=require("consola"),A=e.consola.prompt.bind(e.consola),d=A;var u=require("consola"),p=class{_instance=u.consola;log=this._instance.log;start=this._instance.start;success=this._instance.success;info=this._instance.info;error=this._instance.error},m=new p;var h=c(require("dotenv")),a=require("node:child_process"),r=c(require("node:path"));h.config();var f=r.default.join((0,a.execSync)(`cd ${process.env.PROJECT_ROOT_PATH} && pwd`,{encoding:"utf-8"}).replace(`
`,"")),C=r.default.join(f,"./scripts"),I=r.default.join((0,a.execSync)(`cd ${process.env.IKALA_ROOT_PATH} && pwd`,{encoding:"utf-8"}).replace(`
`,""));var P=()=>new Promise(t=>{let{scripts:o}=JSON.parse((0,O.readFileSync)(g.default.join(f,"package.json"),"utf-8")),s=Object.keys(o).filter(n=>n.startsWith("cmd"));t([...s,"quit"])}),R=async()=>{let t=await P(),o=await d("\u9078\u64C7\u8981\u57F7\u884C\u7684 cmd",{type:"select",name:"command",options:t});o.toString()==="quit"&&process.exit(0),m.start("start to child process");let s=(0,_.spawn)("pnpm",["run",o.toString()],{stdio:"inherit"});s.on("close",()=>{m.info(`finished ${o} process`)}),process.on("exit",()=>{s.kill()})};R();
